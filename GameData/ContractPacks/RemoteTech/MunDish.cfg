// Contract for setting up a satellite for the inner planets.
//   Author: nightingale

CONTRACT_TYPE:NEEDS[RemoteTech]
{
    name = RT_MunDish

    title = RemoteTech: Point some dishes at either the Mun or Minmus.
    description = We'd like you to point a satellite at the Mun or Minmus so we can start sending some probes that way!
    synopsis = Point a dish at one of our moons!
    completedMessage = We've got a signal bouncing back, good job!

    group = RemoteTech

    // Level 1 prestige
    prestige = Trivial

    // The satellite is launch in Kerbin orbit - so it's a Kerbin contract
    targetBody = Kerbin

    // Always offered by CommSat Group
    agent = Communication Satellite Group

    // Can only do this contract once
    maxCompletions = 1

    // Contract rewards
    rewardReputation = 1.0
    rewardFunds = @advanceFunds * 3.0
    advanceFunds = 5000.0

    weight = 1.5
    
    PARAMETER
    {
        name = MunSat
        type = VesselParameterGroup

        disableOnStateChange = false

        PARAMETER
        {
            name = KSCConnectivity
            type = KSCConnectivity
        }

        PARAMETER
        {
            name = ReachState
            type = ReachState

            situation = ORBITING
        }

        PARAMETER
        {
            name = InnerTarget
            type = Any

            title = Point a Dish at the Mun or Minmus

            disableOnStateChange = false

            PARAMETER
            {
                name = HasAntenna
                type = HasAntenna

                antennaType = Dish
                targetBody = Mun
            }

            PARAMETER
            {
                name = HasAntenna
                type = HasAntenna

                antennaType = Dish
                targetBody = Minmus
            }
        }
    }    

    PARAMETER
    {
        name = Duration
        type = Duration

        duration = 2d

        preWaitText = Testing time after network up
        waitingText = Performing shake-out testing
        completionText = Shake-out testing completed
    }

    REQUIREMENT
    {
        name = Coverage
        type = Any

        REQUIREMENT
        {
            name = CelestialBodyCoverage
            type = CelestialBodyCoverage

            targetBody = Mun

            minCoverage = 0.0
            maxCoverage = 0.2
        }

        REQUIREMENT
        {
            name = CelestialBodyCoverage
            type = CelestialBodyCoverage

            targetBody = Minmus

            minCoverage = 0.0
            maxCoverage = 0.2
        }
    }

    REQUIREMENT
    {
        name = PartModuleTypeUnlocked
        type = PartModuleTypeUnlocked

        partModuleType = Antenna
        partModuleType = Power
    }
}
